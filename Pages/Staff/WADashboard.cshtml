@page
@model EDP_Project.Pages.Staff.WADashboardModel
@{
    ViewData["Title"] = "Web Analytics Dashboard";
}

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<style>
    .card.card-stats {
        margin-bottom: 20px;
    }

    .floater {
        float: right;
    }

    .grp-chart {
        margin: 15px 1% 0 1%;
        display: inline-block;
        width: 33%;
        border: 1px solid #cccccc;
        box-shadow: 0 0 5px #cccccc;
    }

    .grp-chart > h3 {
        margin: 5%;
    }
</style>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Web Analytics Dashboard</li>
    </ol>
</nav>

<div class="container">

    <h1 class="text-center">Web Analytics Dashboard</h1>

    <div class="grp-chart">
        <h3>Used By Gender</h3>
        <div id="genderChart_div" class="gchart"></div>
    </div>

    <div class="grp-chart">
        <h3>Customers' Region</h3>
        <div id="geoChart_div" class="gchart"></div>
    </div>

    <div class="grp-chart">
        <h3>Web Traffic Source (Visits)</h3>
        <div id="trafficChart_div" class="gchart"></div>
    </div>



</div>

<script type="text/javascript">

    // Load the Visualization API and the corechart package.
    google.charts.load('current', { 'packages': ['corechart', 'geochart'] });

    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {

        //
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Gender');
        data.addColumn('number', 'Count');
        data.addRows([
            ['Male', @Model.maleCount],
            ['Female', @Model.femaleCount]
        ]);

        var options = {
            'height': 250,
            'pieHole': 0.5
        };

        var chart = new google.visualization.PieChart(document.getElementById('genderChart_div'));
        chart.draw(data, options);

        //
        var data = google.visualization.arrayToDataTable([
            ['Country', 'Popularity'],
            ['Germany', 200],
            ['United States', 300],
            ['Brazil', 400],
            ['Canada', 500],
            ['France', 600],
            ['RU', 700]
        ]);

        var options = {
            'height': 250
        };

        var chart = new google.visualization.GeoChart(document.getElementById('geoChart_div'));
        chart.draw(data, options);


        //
        var data = google.visualization.arrayToDataTable([
            ['Year', 'Visitations', { role: 'style' }],
            ['Opera', 14, 'color: #76A7FA'],
            ['Safari', 16, 'opacity: 0.2'],
            ['Firefox', 22, 'stroke-color: #703593; stroke-width: 4; fill-color: #C5A5CF'],
            ['Google Chrome', 28, 'stroke-color: #871B47; stroke-opacity: 0.6; stroke-width: 8; fill-color: #BC5679; fill-opacity: 0.2']
        ]);

        var view = new google.visualization.DataView(data);
        view.setColumns([0, 1,
            {
                calc: "stringify",
                sourceColumn: 1,
                type: "string",
                role: "annotation"
            },
            2]);

        var options = {
            height: 400,
            bar: { groupWidth: "95%" },
            legend: { position: "none" },
        };
        var chart = new google.visualization.BarChart(document.getElementById("trafficChart_div"));
        chart.draw(view, options);

    }
</script>