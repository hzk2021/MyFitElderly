@page
@model EDP_Project.Pages.FoodListModel
@{
    ViewData["Title"] = "Food List";
}

<h1>Health Tracking - Food Records</h1>
<br />
<div class="row">
    <a asp-page="AddFood" class="btn btn-primary" style="margin-bottom:2%;"><i class="fas fa-plus-circle"></i> Add new food</a>
    <div class="ml-auto">
        <form class="row" action="/" method="post">
            <select id="CategoryFilter" class="form-control col-md-5" style="margin-right:1%;" asp-for="Category">
                <option value="All" selected>All categories</option>
                <option value="Light Meal">Light Meals</option>
                <option value="Heavy Meal">Heavy Meals</option>
                <option value="Drink">Drinks</option>
                <option value="Snack">Snacks</option>
            </select>
            <input id="SearchBar" class="form-control col-md-6" type="text" asp-for="Search" placeholder="Search in category"/>
        </form>
    </div>
</div>
<br/>

<div class="tab-pane container-fluid active" id="LMTab">
    <table class="table">
        <tr>
            <th>Food Id</th>
            <th>Name</th>
            <th>Category</th>
            <th>Calories</th>
            <th>Actions</th>
        </tr>

        @foreach (var food in Model.AllFood)
        {
            <tr>
                <td>@food.FoodId</td>
                <td>@food.FoodName</td>
                <td>@food.Category</td>
                <td>@food.Calories</td>
                <td>
                    <a asp-page="EditFood" asp-route-id="@food.FoodId"><i class="fas fa-pencil-alt"></i></a>
                    <span class="text-primary">  |  </span>
                    <button type="button" class="btn text-primary" style="padding:0px;" data-toggle="modal" data-target="#confirmDelete_@food.FoodId"><i class="fa fa-trash"></i></button>
                    <!-- The Modal -->
                    <div class="modal" id="confirmDelete_@food.FoodId">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Delete Confirmation</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>

                                <div class="modal-body">
                                    <p>Are you sure you want to delete ID @food.FoodId : @food.FoodName</p>
                                    <p class="text-danger"><i class="fas fa-exclamation-triangle"></i> Proceed with caution!</p>
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                    <a asp-page="DeleteFood" asp-route-id="@food.FoodId" class="btn btn-danger">Delete</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        }

        @if (Model.AllFood.Count() == 0)
        {
            <tr>
                <td class="text-center" colspan="5">No food record yet.</td>
            </tr>
        }

    </table>
</div>

<script>
    var category = document.getElementById("CategoryFilter").value;
    var search = document.getElementById("SearchBar").value
    //while (true) {
    //    setTimeout(function () {
            
    //    }, 1000)
    //}
</script>

