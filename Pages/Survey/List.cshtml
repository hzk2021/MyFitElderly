@page
@model EDP_Project.Pages.Survey.ListModel
@{
    ViewData["Title"] = "List of Available Surveys";
}

<style>
    .my-grid{
        margin-top: 5%;
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-template-rows: 150px auto;
        grid-gap: 5%;
    }

    img {
        object-fit: fill;
        width: 100%;
        height: 100%;
        order: -1;
        border: 1px solid black;

    }

    .grid-info {
        width: 50%;
        margin: auto;
    }
</style>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Survey List</li>
    </ol>
</nav>

<div class="container">
    @{
        <h1 class="text-center">Available Surveys For You</h1>

        <div class="my-grid">
            @{
                foreach (var survey in Model.Surveys)
                {
                    if (survey.ViewStatus == "Visible")
                    {
                        <div class="grid-item">
                            @if (survey.ImgBytes != null)
                            {
                                var base64 = Convert.ToBase64String(survey.ImgBytes);
                                var userImage = String.Format("data:image/gif;base64,{0}", base64);
                                <img src="@userImage" alt="Survey Image" />
                            }

                            <div class="grid-info">
                                <p>Title: @survey.Title</p>
                                <p>Description: @survey.Description</p>

                                <form asp-page="CreateResponse" method="get" asp-route-sid="@survey.SurveyUUID">
                                    <button type="submit" class="btn btn-primary">Take this survey</button>
                                </form>
                            </div>
                        </div>
                    }
                }
            }
        </div>
    }
</div>

